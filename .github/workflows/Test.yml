name: Cloudflare Bypass Test ğŸ¥·

on:
  workflow_dispatch:

jobs:
  bypass-test:
    runs-on: ubuntu-latest
    steps:
    - name: ğŸ“¦ Install Ninja Tools
      run: pip install cloudscraper beautifulsoup4

    - name: ğŸŒ Surgical Strike on Filmyzilla
      run: |
        python3 -c "
        import cloudscraper
        from bs4 import BeautifulSoup

        # Cloudscraper khud headers handle kar leta hai
        scraper = cloudscraper.create_scraper(
            browser={
                'browser': 'chrome',
                'platform': 'windows',
                'desktop': True
            }
        )

        url = 'https://www.filmyzilla32.com/category/hollywood-movies-in-hindi-dubbed.html'
        print(f'ğŸš€ INITIATING NINJA ATTACK ON: {url}')

        try:
            resp = scraper.get(url, timeout=30)
            print(f'ğŸ“¡ STATUS: {resp.status_code}')
            
            if resp.status_code == 200:
                soup = BeautifulSoup(resp.text, 'html.parser')
                links = soup.select('div.touch a')
                print(f'âœ… BINGO! Found {len(links)} links using Ninja Scraper!')
                for a in links[:5]:
                    print(f'  - {a.get_text()}')
            else:
                print(f'âŒ STILL BLOCKED. Status: {resp.status_code}')
                # Agar blocked hai to check karo text me kya hai
                if 'Cloudflare' in resp.text:
                    print('âš ï¸ Cloudflare is too strong for simple cloudscraper.')

        except Exception as e:
            print(f'ğŸš¨ CRASHED: {e}')
        "
